<!DOCTYPE html>
<html lang="ca">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css2?family=Lobster&display=swap"
      rel="stylesheet"
    />

    <title>El Portal del Joc</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="css/styleCart.css" />
  </head>
  <body>
    
    <header class="menu-superior">
      <div class="logo-container">
        <img src="./file.png" alt="Logo" class="logo" />
        <h1 class="nombre-tienda">El Portal del Joc</h1>
      </div>
      <div class="buscador">
        <input type="text" placeholder="Buscar..." />
      </div>
      <nav>
        <ul class="menu-links">
          <li><a href="index.html">Inici</a></li>
          <li><a href="#">Categories</a></li>
          <li><a href="#">Qui Som </a></li>
          <li><a href="#">Admin</a></li>
        </ul>
      </nav>
    </header>

    <section class="seccio" id="appVue">
      <div class="header">
        <div class="iconos-header">
          <i class="fas fa-shopping-cart" @click="toggleCart"></i>
          <span v-if="totalCart > 0" class="cart-count">{{ totalCart }}</span>
        </div>
      </div>

      <div class="slogan" v-if="sloganVisible">
        Sempre hi ha un <span class="highlight">joc perfecte</span> per a cada
        persona
      </div>

      <button @click="mostrarProductos" class="boto-mostrar-tots">
        Mostrar Tots els Productes
      </button>

      <div class="grid-container" v-if="productosVisible">
        <div
          v-for="producto in infoTotal.datos"
          :key="producto.id"
          class="grid-item"
        >
          <div class="targeta-producte">
            <h2 class="nom-producte">{{ producto.title }}</h2>
            <img
              :src="producto.image"
              alt="imatge del joc"
              class="imatge-producte"
            />
            <p class="descripcio-producte">{{ producto.description }}</p>
            <p class="preu-producte">{{ producto.price }} €</p>
            <p class="stock-producte" v-if="producto.stock > 0">
              Stock disponible: {{ producto.stock }}
            </p>
            <p class="stock-producte" v-else style="color: red">Sense stock</p>
            <button
              class="boto-comprar"
              :disabled="producto.stock === 0"
              @click="addCart(producto.id)"
            >
              Comprar
            </button>
          </div>
        </div>
      </div>

      <!-- Carrito de compras (solo visible si cartVisible es verdadero) -->
      <div id="cartContainer" v-if="cartVisible">
        <div class="cartHead">
          <h1>CISTELLA DE LA COMPRA</h1>
        </div>
        <div class="cartBody">
          <div
            class="productItem"
            v-for="producte in cart.datos"
            :key="producte.product.id"
          >
            <h4>{{ producte.product.title }}</h4>
            <div class="butons">
              <label for="quantititatProducte">Cantidad:</label>
              <input
                type="number"
                v-model.number="producte.product.quantitat"
                min="1"
                @input="calcularTotal"
              />
            </div>
            <p class="preu">
              €{{ (producte.product.price *
              producte.product.quantitat).toFixed(2) }}
            </p>
            <button class="btnEliminar" @click="eliminarProducte(producte)">
              X
            </button>
          </div>
        </div>
        <div class="total">
          <h4>Total: €{{ preuTotal.total.toFixed(2) }}</h4>
        </div>
        <div class="finalitzarCompra">
          <input
            type="button"
            value="Finalizar compra"
            class="butonFinalitzar"
          />
        </div>
      </div>
    </section>

    <!-- Carga de Bootstrap y Vue -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
    <script type="module" src="./productes.js"></script>
  </body>
</html>
